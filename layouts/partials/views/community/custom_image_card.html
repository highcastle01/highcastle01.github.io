<div class="card-grid">
    {{ range .Pages }}
    {{ $item := . }}
    {{ $link := $item.RelPermalink }}
    {{ $target := "" }}
    {{ if $item.Params.external_link }}
      {{ $link = $item.Params.external_link }}
      {{ $target = "target=\"_blank\" rel=\"noopener\"" }}
    {{ end }}
    
    {{/* Get summary */}}
    {{ $summary := "" }}
    {{ if $item.Params.summary }}
      {{ $summary = $item.Params.summary | markdownify | emojify }}
    {{ else if $item.Params.abstract }}
      {{ $summary = $item.Params.abstract | markdownify | emojify | truncate (site.Params.abstract_length | default 135) }}
    {{ else if $item.Summary }}
      {{ $summary = $item.Summary }}
    {{ end }}
    
    {{ $resource := partial "blox-core/functions/get_featured_image.html" $item }}
    
    <div class="card">
      {{ with $resource }}
      <a href="{{ $link }}" {{ $target | safeHTMLAttr }} class="card-image">
        <img src="{{ .RelPermalink }}" alt="{{ $item.Title }}" class="img-responsive" loading="lazy">
      </a>
      {{ end }}
      <div class="card-content">
        <h4><a href="{{ $link }}" {{ $target | safeHTMLAttr }}>{{ $item.Title | markdownify | emojify }}</a></h4>
        {{ if $summary }}
        <p>{{ $summary }}</p>
        {{ end }}
  
        {{ if $item.Params.links }}
        <div class="btn-links">
          {{ range $item.Params.links }}
          <a href="{{ .url }}" class="btn">{{ .label }}</a>
          {{ end }}
        </div>
        {{ end }}
      </div>
    </div>
    {{ end }}
  </div>
  